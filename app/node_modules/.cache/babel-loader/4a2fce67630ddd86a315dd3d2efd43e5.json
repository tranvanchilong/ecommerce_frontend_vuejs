{"remainingRequest":"/app/node_modules/babel-loader/lib/index.js!/app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/app/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/app/src/views/Checkout.vue?vue&type=script&lang=js","dependencies":[{"path":"/app/src/views/Checkout.vue","mtime":1690672166307},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1690693963210},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1690693964507},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1690693963210},{"path":"/app/node_modules/vue-loader-v16/dist/index.js","mtime":1690693964390}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ2hlY2tvdXQnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjYXJ0OiB7CiAgICAgICAgaXRlbXM6IFtdCiAgICAgIH0sCiAgICAgIGZpcnN0X25hbWU6ICcnLAogICAgICBsYXN0X25hbWU6ICcnLAogICAgICBlbWFpbDogJycsCiAgICAgIHBob25lOiAnJywKICAgICAgYWRkcmVzczogJycsCiAgICAgIHppcGNvZGU6ICcnLAogICAgICBwbGFjZTogJycsCiAgICAgIGVycm9yczogW10KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgZG9jdW1lbnQudGl0bGUgPSAnQ2hlY2tvdXQgfCBEamFja2V0cyc7CiAgICB0aGlzLmNhcnQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5jYXJ0OwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0SXRlbVRvdGFsOiBmdW5jdGlvbiBnZXRJdGVtVG90YWwoaXRlbSkgewogICAgICByZXR1cm4gaXRlbS5xdWFudGl0eSAqIGl0ZW0ucHJvZHVjdC5wcmljZTsKICAgIH0sCiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiBzdWJtaXRGb3JtKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5lcnJvcnMgPSBbXTsKCiAgICAgIGlmICh0aGlzLmZpcnN0X25hbWUgPT09ICcnKSB7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaCgnVGhlIGZpcnN0IG5hbWUgZmllbGQgaXMgbWlzc2luZyEnKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubGFzdF9uYW1lID09PSAnJykgewogICAgICAgIHRoaXMuZXJyb3JzLnB1c2goJ1RoZSBsYXN0IG5hbWUgZmllbGQgaXMgbWlzc2luZyEnKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZW1haWwgPT09ICcnKSB7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaCgnVGhlIGVtYWlsIGZpZWxkIGlzIG1pc3NpbmchJyk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnBob25lID09PSAnJykgewogICAgICAgIHRoaXMuZXJyb3JzLnB1c2goJ1RoZSBwaG9uZSBmaWVsZCBpcyBtaXNzaW5nIScpOwogICAgICB9CgogICAgICBpZiAodGhpcy5hZGRyZXNzID09PSAnJykgewogICAgICAgIHRoaXMuZXJyb3JzLnB1c2goJ1RoZSBhZGRyZXNzIGZpZWxkIGlzIG1pc3NpbmchJyk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnppcGNvZGUgPT09ICcnKSB7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaCgnVGhlIHppcCBjb2RlIGZpZWxkIGlzIG1pc3NpbmchJyk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnBsYWNlID09PSAnJykgewogICAgICAgIHRoaXMuZXJyb3JzLnB1c2goJ1RoZSBwbGFjZSBmaWVsZCBpcyBtaXNzaW5nIScpOwogICAgICB9CgogICAgICBpZiAoIXRoaXMuZXJyb3JzLmxlbmd0aCkgewogICAgICAgIC8vIEfhu61pIGThu68gbGnhu4d1IHThu5tpIHNlcnZlciBraGkga2jDtG5nIGPDsyBs4buXaSBuaOG6rXAgbGnhu4d1CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRJc0xvYWRpbmcnLCB0cnVlKTsgLy8gQ2h14bqpbiBi4buLIGThu68gbGnhu4d1IMSR4buDIGfhu61pIGzDqm4gc2VydmVyCgogICAgICAgIHZhciBpdGVtcyA9IHRoaXMuY2FydC5pdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHByb2R1Y3Q6IGl0ZW0ucHJvZHVjdC5pZCwKICAgICAgICAgICAgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHksCiAgICAgICAgICAgIHByaWNlOiBpdGVtLnByb2R1Y3QucHJpY2UgKiBpdGVtLnF1YW50aXR5CiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgZmlyc3RfbmFtZTogdGhpcy5maXJzdF9uYW1lLAogICAgICAgICAgbGFzdF9uYW1lOiB0aGlzLmxhc3RfbmFtZSwKICAgICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLAogICAgICAgICAgYWRkcmVzczogdGhpcy5hZGRyZXNzLAogICAgICAgICAgemlwY29kZTogdGhpcy56aXBjb2RlLAogICAgICAgICAgcGxhY2U6IHRoaXMucGxhY2UsCiAgICAgICAgICBwaG9uZTogdGhpcy5waG9uZSwKICAgICAgICAgIGl0ZW1zOiBpdGVtcwogICAgICAgIH07IC8vIEfhu61pIGThu68gbGnhu4d1IHThu5tpIHNlcnZlciB0aMO0bmcgcXVhIEFQSQoKICAgICAgICBheGlvcy5wb3N0KCcvYXBpL3YxL2NoZWNrb3V0LycsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdjbGVhckNhcnQnKTsKCiAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goJy9jYXJ0L3N1Y2Nlc3MnKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIF90aGlzLmVycm9ycy5wdXNoKCdTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2FpbicpOwoKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoJ3NldElzTG9hZGluZycsIGZhbHNlKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNhcnRUb3RhbFByaWNlOiBmdW5jdGlvbiBjYXJ0VG90YWxQcmljZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY2FydC5pdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgY3VyVmFsKSB7CiAgICAgICAgcmV0dXJuIGFjYyArIGN1clZhbC5wcm9kdWN0LnByaWNlICogY3VyVmFsLnF1YW50aXR5OwogICAgICB9LCAwKTsKICAgIH0sCiAgICBjYXJ0VG90YWxMZW5ndGg6IGZ1bmN0aW9uIGNhcnRUb3RhbExlbmd0aCgpIHsKICAgICAgcmV0dXJuIHRoaXMuY2FydC5pdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgY3VyVmFsKSB7CiAgICAgICAgcmV0dXJuIGFjYyArIGN1clZhbC5xdWFudGl0eTsKICAgICAgfSwgMCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/app/src/views/Checkout.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"page-checkout\">\n      <div class=\"columns is-multiline\">\n        <div class=\"column is-12\">\n          <h1 class=\"title\">Checkout</h1>\n        </div>\n  \n        <div class=\"column is-12 box\">\n          <table class=\"table is-fullwidth\">\n            <thead>\n              <tr>\n                <th>Product</th>\n                <th>Price</th>\n                <th>Quantity</th>\n                <th>Total</th>\n              </tr>\n            </thead>\n  \n            <tbody>\n              <tr v-for=\"item in cart.items\" :key=\"item.product.id\">\n                <td>{{ item.product.name }}</td>\n                <td>${{ item.product.price }}</td>\n                <td>{{ item.quantity }}</td>\n                <td>${{ getItemTotal(item).toFixed(2) }}</td>\n              </tr>\n            </tbody>\n  \n            <tfoot>\n              <tr>\n                <td colspan=\"2\">Total</td>\n                <td>{{ cartTotalLength }}</td>\n                <td>${{ cartTotalPrice.toFixed(2) }}</td>\n              </tr>\n            </tfoot>\n          </table>\n        </div>\n  \n        <div class=\"column is-12 box\">\n          <h2 class=\"subtitle\">Shipping details</h2>\n  \n          <p class=\"has-text-grey mb-4\">* All fields are required</p>\n  \n          <div class=\"columns is-multiline\">\n            <div class=\"column is-6\">\n              <div class=\"field\">\n                <label>First name*</label>\n                <div class=\"control\">\n                  <input type=\"text\" class=\"input\" v-model=\"first_name\">\n                </div>\n              </div>\n  \n              <div class=\"field\">\n                <label>Last name*</label>\n                <div class=\"control\">\n                  <input type=\"text\" class=\"input\" v-model=\"last_name\">\n                </div>\n              </div>\n  \n              <div class=\"field\">\n                <label>E-mail*</label>\n                <div class=\"control\">\n                  <input type=\"email\" class=\"input\" v-model=\"email\">\n                </div>\n              </div>\n  \n              <div class=\"field\">\n                <label>Phone*</label>\n                <div class=\"control\">\n                  <input type=\"text\" class=\"input\" v-model=\"phone\">\n                </div>\n              </div>\n            </div>\n  \n            <div class=\"column is-6\">\n              <div class=\"field\">\n                <label>Address*</label>\n                <div class=\"control\">\n                  <input type=\"text\" class=\"input\" v-model=\"address\">\n                </div>\n              </div>\n  \n              <div class=\"field\">\n                <label>Zip code*</label>\n                <div class=\"control\">\n                  <input type=\"text\" class=\"input\" v-model=\"zipcode\">\n                </div>\n              </div>\n  \n              <div class=\"field\">\n                <label>Place*</label>\n                <div class=\"control\">\n                  <input type=\"text\" class=\"input\" v-model=\"place\">\n                </div>\n              </div>\n            </div>\n          </div>\n  \n          <div class=\"notification is-danger mt-4\" v-if=\"errors.length\">\n            <p v-for=\"error in errors\" :key=\"error\">{{ error }}</p>\n          </div>\n  \n          <hr>\n  \n          <template v-if=\"cartTotalLength\">\n            <hr>\n  \n            <button class=\"button is-dark\" @click=\"submitForm\">Checkout</button>\n          </template>\n        </div>\n      </div>\n    </div>\n  </template>\n  \n  <script>\n  import axios from 'axios'\n  \n  export default {\n    name: 'Checkout',\n    data() {\n      return {\n        cart: {\n          items: []\n        },\n        first_name: '',\n        last_name: '',\n        email: '',\n        phone: '',\n        address: '',\n        zipcode: '',\n        place: '',\n        errors: []\n      }\n    },\n    mounted() {\n      document.title = 'Checkout | Djackets'\n      this.cart = this.$store.state.cart\n    },\n    methods: {\n      getItemTotal(item) {\n        return item.quantity * item.product.price\n      },\n      submitForm() {\n        this.errors = []\n  \n        if (this.first_name === '') {\n          this.errors.push('The first name field is missing!')\n        }\n  \n        if (this.last_name === '') {\n          this.errors.push('The last name field is missing!')\n        }\n  \n        if (this.email === '') {\n          this.errors.push('The email field is missing!')\n        }\n  \n        if (this.phone === '') {\n          this.errors.push('The phone field is missing!')\n        }\n\n        if (this.address === '') {\n        this.errors.push('The address field is missing!')\n      }\n\n      if (this.zipcode === '') {\n        this.errors.push('The zip code field is missing!')\n      }\n\n      if (this.place === '') {\n        this.errors.push('The place field is missing!')\n      }\n\n      if (!this.errors.length) {\n        // Gửi dữ liệu tới server khi không có lỗi nhập liệu\n        this.$store.commit('setIsLoading', true)\n        \n        // Chuẩn bị dữ liệu để gửi lên server\n        const items = this.cart.items.map(item => ({\n          product: item.product.id,\n          quantity: item.quantity,\n          price: item.product.price * item.quantity\n        }));\n\n        const data = {\n          first_name: this.first_name,\n          last_name: this.last_name,\n          email: this.email,\n          address: this.address,\n          zipcode: this.zipcode,\n          place: this.place,\n          phone: this.phone,\n          items: items\n        };\n\n        // Gửi dữ liệu tới server thông qua API\n        axios.post('/api/v1/checkout/', data)\n          .then(response => {\n            this.$store.commit('clearCart');\n            this.$router.push('/cart/success');\n          })\n          .catch(error => {\n            this.errors.push('Something went wrong. Please try again');\n            console.log(error);\n          })\n          .finally(() => {\n            this.$store.commit('setIsLoading', false);\n          });\n      }\n    }\n  },\n  computed: {\n    cartTotalPrice() {\n      return this.cart.items.reduce((acc, curVal) => {\n        return acc + curVal.product.price * curVal.quantity;\n      }, 0);\n    },\n    cartTotalLength() {\n      return this.cart.items.reduce((acc, curVal) => {\n        return acc + curVal.quantity;\n      }, 0);\n    }\n  }\n}\n</script>"],"sourceRoot":""}]}